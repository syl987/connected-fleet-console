<div class="container">
  <app-title-bar>
    <button mat-stroked-button class="app-tertiary" (click)="startGeneratingLogs()">Start Generating Logs</button>
    <button mat-stroked-button class="app-error" (click)="stopGeneratingLogs()">Stop</button>
    <button mat-stroked-button (click)="loadAnalytics()" [disabled]="loading()">Refresh</button>
  </app-title-bar>

  @if (loading()) {
    <div class="loading-container">
      <mat-spinner diameter="40" />
      <p>Loading analytics...</p>
    </div>
  }

  <!-- Summary Cards -->
  @if (summary(); as data) {
    <div class="summary-grid">
      <mat-card appearance="outlined">
        <mat-card-header>
          <mat-icon mat-card-avatar>list_alt</mat-icon>
          <mat-card-title>Total Logs</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="stat-value">{{ data.totalLogs | number }}</div>
        </mat-card-content>
      </mat-card>

      <mat-card appearance="outlined">
        <mat-card-header>
          <mat-icon mat-card-avatar>directions_car</mat-icon>
          <mat-card-title>Unique Vehicles</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="stat-value">{{ data.uniqueVehicles }}</div>
        </mat-card-content>
      </mat-card>

      <mat-card appearance="outlined">
        <mat-card-header>
          <mat-icon mat-card-avatar>code</mat-icon>
          <mat-card-title>Error Codes</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="stat-value">{{ data.uniqueCodes }}</div>
        </mat-card-content>
      </mat-card>
    </div>
  }
</div>
